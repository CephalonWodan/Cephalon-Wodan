<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>Warframe Hub — Cephalon Wodan</title>

  <!-- Thèmes locaux -->
  <link rel="stylesheet" href="css/theme.css?v=1" />
  <link rel="stylesheet" href="css/hub.css?v=10" />

  <!-- Barre de navigation du site -->
  <script src="js/site_nav.js" defer></script>

  <!-- Monte la nav si une API globale est dispo (fallback no-op) -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      // Ajoute un flag au body pour d’éventuelles règles CSS (.has-topnav)
      document.body.classList.add('has-topnav');
      // Si site_nav.js expose une fonction de rendu, on l’utilise
      if (typeof window.renderSiteNav === 'function') {
        try {
          window.renderSiteNav('#site-nav', { active: 'Hub' });
        } catch (e) {
          console.warn('site_nav: renderSiteNav a échoué, on continue.', e);
        }
      }
    });
  </script>
</head>

<body class="wf" data-section="hub">
  <!-- Point d’ancrage pour la barre de navigation -->
  <nav id="site-nav" class="site-nav" aria-label="Navigation principale"></nav>

  <!-- Header spécifique Hub -->
  <header class="wf-toolbar">
    <div class="wf-toolbar__left">
      <h1 class="wf-title">Hub</h1>
      <span class="wf-now">Maintenant : <strong id="now">—</strong></span>
    </div>
    <div class="wf-toolbar__right">
      <label>Plateforme
        <select id="platform">
          <option value="pc" selected>PC</option>
          <option value="ps4">PS4</option>
          <option value="xb1">XB1</option>
          <option value="swi">Switch</option>
          <option value="mob">Mobile</option>
        </select>
      </label>
      <label>Langue
        <select id="lang">
          <option value="en" selected>EN</option>
          <option value="fr">FR</option>
        </select>
      </label>
    </div>
  </header>

  <main class="wf-grid" id="wf-hub-root">
    <!-- Cycles -->
    <section class="wf-card">
      <h2 class="wf-card__title">Cycles <small id="ctx-cycles" class="wf-ctx"></small></h2>
      <ul id="cycles-list" class="wf-list"></ul>
    </section>

    <!-- Fissures -->
    <section class="wf-card">
      <h2 class="wf-card__title">Fissures <small id="ctx-fissures" class="wf-ctx"></small></h2>
      <div class="wf-controls">
        <label>Tier
          <select id="fissure-tier">
            <option value="all" selected>All</option>
            <option value="lith">Lith</option>
            <option value="meso">Meso</option>
            <option value="neo">Neo</option>
            <option value="axi">Axi</option>
            <option value="omnia">Omnia</option>
            <option value="requiem">Requiem</option>
          </select>
        </label>
        <label>Difficulté
          <select id="fissure-hard">
            <option value="all" selected>All</option>
            <option value="normal">Normal</option>
            <option value="hard">Steel Path</option>
          </select>
        </label>
      </div>
      <ul id="fissures-list" class="wf-list"></ul>
    </section>

    <!-- Sortie -->
    <section class="wf-card">
      <h2 class="wf-card__title">Sortie <small id="ctx-sorties" class="wf-ctx"></small></h2>
      <div id="sortie" class="wf-pad"></div>
    </section>

    <!-- Archon Hunt -->
    <section class="wf-card">
      <h2 class="wf-card__title">Archon Hunt</h2>
      <div id="archon" class="wf-pad"></div>
    </section>

    <!-- Duviri Circuit -->
    <section class="wf-card">
      <h2 class="wf-card__title">Duviri Circuit <small id="ctx-duviri" class="wf-ctx"></small></h2>
      <div id="duviri-circuit" class="wf-pad"></div>
    </section>

    <!-- Nightwave -->
    <section class="wf-card">
      <h2 class="wf-card__title">Nightwave <small id="ctx-nightwave" class="wf-ctx"></small></h2>
      <ul id="nightwave-list" class="wf-list"></ul>
    </section>

    <!-- Baro -->
    <section class="wf-card">
      <h2 class="wf-card__title">Baro Ki’Teer <small id="ctx-baro" class="wf-ctx"></small></h2>
      <div id="baro-status" class="wf-pad"></div>
      <ul id="baro-inventory" class="wf-list"></ul>
    </section>

    <!-- Invasions -->
    <section class="wf-card">
      <h2 class="wf-card__title">Invasions <small id="ctx-invasions" class="wf-ctx"></small></h2>
      <ul id="invasions-list" class="wf-list"></ul>
    </section>

    <!-- Primes/Bounties -->
    <section class="wf-card">
      <h2 class="wf-card__title">Primes <small id="ctx-bounties" class="wf-ctx"></small></h2>
      <div id="bounty-content" class="wf-pad"></div>
    </section>
  </main>

  <!-- Logique du Hub (timers, fetch API Railway, rendu) -->
  <script type="module" src="js/hub.js?v=10"></script>
</body>
</html>
