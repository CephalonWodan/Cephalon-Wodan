/* =========================================================
   HUB (Cephalon Wodan) — Thème Orokin (v17, Masonry)
   ========================================================= */

:root{
  --bg:#0a0f1a;
  --panel-1:#0f172a;
  --panel-2:#0b1423;
  --ink:#e6edf7;
  --muted:#93a4b8;
  --gold:#e6d28e;
  --shadow:0 12px 30px rgba(0,229,255,.06), inset 0 1px 0 rgba(255,255,255,.03);
  --masonry-row: 8px; /* unité de hauteur pour le masonry */
}

/* Base */
*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; background:var(--bg); color:var(--ink); font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial; }
img{ max-width:100%; }

/* Toolbar */
.wf-toolbar{ display:flex; align-items:center; justify-content:space-between; gap:.75rem; padding:.6rem .9rem; max-width:1400px; margin:0 auto 1rem; }
.wf-toolbar__right{ display:flex; align-items:center; gap:.75rem; }
.wf-toolbar label{ display:flex; align-items:center; gap:.35rem; color:var(--muted); }
.wf-toolbar select{ background:var(--panel-2); color:var(--ink); border:1px solid rgba(230,210,142,.30); border-radius:.6rem; padding:.35rem .6rem; }

/* Masonry Grid */
.wf-grid{
  display:grid; gap:1rem;
  grid-template-columns: repeat(12, minmax(0, 1fr));
  grid-auto-rows: var(--masonry-row);     /* hauteur base */
  grid-auto-flow: row dense;              /* remplissage sans gros trous */
  max-width: 1400px; margin: 0 auto;
}
@media (max-width: 1200px){ .wf-grid{ grid-template-columns: repeat(8, minmax(0,1fr)); } }
@media (max-width: 860px){  .wf-grid{ grid-template-columns: repeat(4, minmax(0,1fr)); } }

/* Card */
.wf-card{
  grid-column: span 4 / span 4;          /* 3 cartes par rangée (12/4) */
  /* la hauteur “span” est fixée en JS (grid-row-end: span N) */
  background: var(--panel-1);
  border-radius: .9rem;
  border: 1px solid rgba(230,210,142,.45);
  box-shadow: var(--shadow);
  overflow: hidden;
  contain: layout;                        /* perf: évite reflow coûteux */
}
.wf-card__title{
  display:flex; align-items:center; gap:.4rem 1rem;
  padding:.85rem 1rem; border-bottom:1px solid rgba(230,210,142,.25);
  background: linear-gradient(180deg, rgba(230,210,142,.06), rgba(0,0,0,0));
  border-top-left-radius:.9rem; border-top-right-radius:.9rem;
  flex-wrap: wrap;                        /* contexte peut wrap */
}
.wf-ctx{
  color: var(--muted);
  margin-left: auto;
  white-space: normal;
  line-height: 1.25;
}
.wf-pad{ padding:.85rem 1rem 1rem; }

/* Lists / rows */
.wf-list{ list-style:none; margin:0; padding:.6rem 1rem 1rem; }
.wf-row{ display:flex; align-items:flex-start; justify-content:space-between; gap:.8rem; padding:.45rem 0; border-bottom:1px dashed rgba(230,210,142,.15); }
.wf-row:last-child{ border-bottom:none; }
.left{ display:flex; align-items:center; gap:.5rem; flex-wrap:wrap; }
.right{ display:flex; align-items:center; gap:.5rem; flex-wrap:wrap; }

/* Chips/badges */
.wf-chip{
  display:inline-flex; align-items:center; gap:.35rem;
  padding:.2rem .5rem; border:1px solid rgba(230,210,142,.40);
  border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.12));
  font-size:.78rem; color:var(--ink);
}
.wf-badge{ padding:.18rem .45rem; border-radius:.45rem; border:1px solid rgba(230,210,142,.35); font-size:.72rem; color:var(--muted); }

/* Fissures tiers */
.tier-lith{ color:#c8ffd7; border-color:#92f2b0; }
.tier-meso{ color:#b8e1ff; border-color:#8cc8ff; }
.tier-neo{ color:#d8c8ff; border-color:#b6a4ff; }
.tier-axi{ color:#ffe1b8; border-color:#ffd08f; }
.tier-omnia{ color:#ffd8f0; border-color:#ffbde8; }
.tag-hard{ color:#ffb4b4; border-color:#ff8a8a; }
.tag-normal{ color:#cbe7ff; border-color:#8cc8ff; }

/* Sortie / Archon */
.wf-box{ border:1px solid rgba(230,210,142,.35); border-radius:.6rem; overflow:clip; }
.wf-box__head{ display:flex; align-items:center; justify-content:space-between; gap:.5rem; padding:.5rem .6rem; background:var(--panel-2); }

/* Invasions */
.inv-head{ display:flex; align-items:center; gap:.5rem; }
.inv-node{ font-weight:600; }
.inv-desc{ color:var(--muted); }
.inv-vs{ display:flex; align-items:center; gap:.45rem; }
.inv-fac{ padding:.1rem .45rem; border-radius:999px; border:1px solid rgba(230,210,142,.25); }
.inv-att{ color:#a8e1ff; border-color:#8cc8ff; }
.inv-def{ color:#ffd8b8; border-color:#ffd08f; }

/* Masquer tout badge “Infested” */
.inv-infested,
.inv-fac.infested,
.wf-badge.infested,
.wf-chip.infested,
.inv-fac[data-faction="Infested"],
[data-faction="Infested"],
.tag-infested{
  display:none !important;
}

/* Progress bar */
.wf-bar{ position:relative; height:8px; background:rgba(255,255,255,.08); border-radius:999px; overflow:hidden; margin-top:.35rem; }
.wf-bar__fill{ position:absolute; inset:0 auto 0 0; width:0%; background:linear-gradient(90deg, rgba(0,229,255,.9), rgba(0,229,255,.2)); }
.wf-bar__label{ color:var(--muted); }

/* Duviri */
.circuit-group{ margin-bottom:.5rem; }
.circuit-group .title{ font-weight:600; margin-bottom:.25rem; }
.circuit-group .chips{ display:flex; flex-wrap:wrap; gap:.35rem; }

/* Primes (chips neutralisées) */
#bounty-content{ padding:.5rem 1rem 1rem; }
#bounty-content .wf-chip{
  border:none; background:none; padding:0; color:var(--muted); font-size:.82rem;
}

/* Responsive tweaks */
@media (max-width:720px){
  .wf-toolbar__right label{ gap:.25rem; }
  .wf-toolbar select{ padding:.3rem .5rem; }
}
